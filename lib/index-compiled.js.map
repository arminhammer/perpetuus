{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;AACb,IAAI,GAAG,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;AACzB,IAAI,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AACjC,IAAI,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC/B,IAAI,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;;AAElC,IAAI,MAAM,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;;AAEtC,IAAI,aAAa,GAAG,SAAhB,aAAa,CAAY,QAAQ,EAAE;;AAErC,MAAI,OAAO,GAAG,IAAI,OAAO,CAAC,UAAS,OAAO,EAAE,MAAM,EAAE;;AAElD,UAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,EAAE,UAAS,KAAK,EAAE,QAAQ,EAAE;AACjD,UAAI,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;AACzB,UAAI,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AACpC,aAAO,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;KACnB,CAAC,CAAC;GAEJ,CAAC,CAAC;;AAEH,SAAO,OAAO,CAAC;CAEhB,CAAC;;AAEF,IAAI,gBAAgB,GAAG,SAAnB,gBAAgB,CAAY,QAAQ,EAAE;AACxC,SAAO,GAAG,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;CACvC,CAAC;;AAEF,IAAI,MAAM,GAAG,SAAT,MAAM,CAAY,QAAQ,EAAE;;;;;AAK9B,MAAI,OAAO,GAAG,IAAI,OAAO,CAAC,UAAS,OAAO,EAAE,MAAM,EAAE;;AAElD,QAAI,KAAK,GAAG,gBAAgB,CAAC,QAAQ,CAAC,CAAC;;AAEvC,QAAG,CAAC,KAAK,EAAE;AAAE,YAAM,CAAC,KAAK,CAAC,CAAC;KAAE,CAAC;;AAE9B,WAAO,aAAa,CAAC,QAAQ,CAAC,CAC3B,IAAI,CAAC,UAAS,IAAI,EAAE;AACnB,aAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;;AAEzB,aAAO,CAAC,IAAI,CAAC,CAAC;KACf,CAAC,CAAC;GAEN,CAAC,CAAC;;AAEH,SAAO,OAAO,CAAC;CAEhB,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC","file":"index-compiled.js","sourcesContent":["'use strict';\nvar tv4 = require('tv4');\nvar cheerio = require('cheerio');\nvar needle = require('needle');\nvar Promise = require('bluebird');\n\nvar schema = require('./schema.json');\n\nvar cheerioDriver = function(template) {\n\n  var promise = new Promise(function(resolve, reject) {\n\n    needle.get(template.url, function(error, response) {\n      if (error) reject(error);\n      var $ = cheerio.load(response.body);\n      resolve($.html());\n    });\n\n  });\n\n  return promise;\n\n};\n\nvar validateTemplate = function(template) {\n  return tv4.validate(template, schema);\n};\n\nvar scrape = function(template) {\n\n  //var driver;\n  //if(!template.driver) driver = 'cheerio';\n\n  var promise = new Promise(function(resolve, reject) {\n\n    var valid = validateTemplate(template);\n    //console.log('valid: ' + valid);\n    if(!valid) { reject(valid); };\n\n    return cheerioDriver(template)\n      .then(function(data) {\n        console.log('Got data!');\n        //console.log(data);\n        resolve(data);\n      });\n\n  });\n\n  return promise;\n\n};\n\nmodule.exports = { scrape: scrape };\n"]}